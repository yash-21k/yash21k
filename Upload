import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RfiStatusUtil {

    /**
     * Checks whether the given rfiStatus string contains
     * a BIC (8 or 11 characters) or an email address (possibly uppercase).
     *
     * @param rfiStatus input string to check
     * @return true if it contains a valid BIC or email, false otherwise
     */
    public static boolean containsBicOrEmail(String rfiStatus) {
        if (rfiStatus == null || rfiStatus.isEmpty()) {
            return false;
        }

        // BIC pattern: 4 letters (bank) + 2 letters (country) + 2 letters/digits (location)
        // + optional 3 letters/digits (branch)
        String bicRegex = "\\b[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\b";

        // Email pattern: uppercase allowed, case-insensitive match
        String emailRegex = "(?i)\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b";

        Pattern bicPattern = Pattern.compile(bicRegex);
        Pattern emailPattern = Pattern.compile(emailRegex, Pattern.CASE_INSENSITIVE);

        Matcher bicMatcher = bicPattern.matcher(rfiStatus);
        Matcher emailMatcher = emailPattern.matcher(rfiStatus);

        return bicMatcher.find() || emailMatcher.find();
    }

    // Example usage
    public static void main(String[] args) {
        System.out.println(containsBicOrEmail("Payment sent to HSBCHKHHXXX")); // true (BIC)
        System.out.println(containsBicOrEmail("Please contact USER@BANK.COM")); // true (Email)
        System.out.println(containsBicOrEmail("Random text only")); // false
    }
}