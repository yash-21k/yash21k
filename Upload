// ✅ Match case type and substatus
boolean matchesBaseConditions =
        equalsIgnoreCaseSafe(investigationCaseType,
                gpiDataHolder.getGPIDetails().getTransactionInfo().getGPIInvestigationCaseType()) &&
        equalsIgnoreCaseSafe(assetSubStatus,
                gpiDataHolder.getGPIDetails().getTransactionInfo().getAssetSubstatus());

// ✅ If third keyword exists, match it; else skip
boolean matchesAssetStatus = true;  // default to true
if (conditions.size() > 2 && assetStatus != null) {
    matchesAssetStatus = equalsIgnoreCaseSafe(assetStatus,
            gpiDataHolder.getGPIDetails().getTransactionInfo().getAssetStatus());
}

if (matchesBaseConditions && matchesAssetStatus) {
    String expectedStatus = expectedValues.get("assetStatusDesc");
    String expectedStp = expectedValues.get("stp");

    gpiToBDETransformer.populateStpAndAssetStatusDesc(
            gpiDataHolder,
            headerEnrichedPymtTransaction.getTrace_id(),
            messageHeader,
            expectedStatus
    );

    assertEquals(expectedStatus,
            derivedBDE.getPaymentEvent().getAssetStatusDescription(),
            "Asset Status Description mismatch for conditions: " + conditions);

    assertEquals(expectedStp,
            derivedBDE.getPaymentInfo().getStpPayment(),
            "STP value mismatch for conditions: " + conditions);
}